<div *ngIf="showAbcAnalysisList">
  <h5 style="text-align:center">ABC Analysis</h5>
  <div class="row">
    <div class="col-lg-2 col-md-2 col-sm-2 form-inline">
      <label class="form-label"><b>Class</b></label>
    </div>
    <div class="col-lg-2 col-md-2 col-sm-2 form-inline"  style="margin-left:40px">
      <label class="form-label"><b>Min</b></label>
    </div>
    <div class="col-lg-2 col-md-2 col-sm-2 form-inline" style="margin-left:40px">
      <label class="form-label"><b>Max</b></label>
    </div>
  </div>
  <br />
  <div class="row">
    <div class="col-lg-2 col-md-2 col-sm-2 form-inline">
      <label class="form-label"><b>A</b></label>
    </div>
    <div class="col-lg-2 col-md-2 col-sm-2 form-inline">
      <input type="number" class="form-control" [(ngModel)]="classA.minpricevalue" />
    </div>
    <div class="col-lg-2 col-md-2 col-sm-2 form-inline">
      <input type="number" class="form-control" [(ngModel)]="classA.maxpricevalue" />
    </div>
  </div><br />
  <div class="row">
    <div class="col-lg-2 col-md-2 col-sm-2 form-inline">
      <label class="form-label"><b>B</b></label>
    </div>
    <div class="col-lg-2 col-md-2 col-sm-2 form-inline">
      <input type="number" class="form-control" [(ngModel)]="classB.minpricevalue"  />
    </div>
    <div class="col-lg-2 col-md-2 col-sm-2 form-inline">
      <input type="number" class="form-control" [(ngModel)]="classB.maxpricevalue" />
    </div>
  </div><br />
  <div class="row">
    <div class="col-lg-2 col-md-2 col-sm-2 form-inline">
      <label class="form-label"><b>C</b></label>
    </div>
    <div class="col-lg-2 col-md-2 col-sm-2 form-inline">
      <input type="number" class="form-control" [(ngModel)]="classC.minpricevalue" />
    </div>
    <div class="col-lg-2 col-md-2 col-sm-2 form-inline">
      <input type="number" class="form-control" [(ngModel)]="classC.maxpricevalue" />
    </div>
  </div><br>
  <div class="row">
    <div class="col-lg-4 col-md-4 col-sm-4"></div>
    <div class="col-lg-1 col-md-1 col-sm-1">
      <button type="button" class="btn btn-primary" (click)="getABCAnalysisList()" label="Save">Classify</button>
    </div>
  </div>
  <br />
  <br />
  <p-table #dt [columns]="cols" [value]="ABCAnalysisList" [style]="{'width':'100%','overflow':'auto!important'}"
           [responsive]="true" [rows]="50"
           [resizableColumns]="true"
           columnResizeMode="expand"
           [paginator]="true" [rowsPerPageOptions]="[25,50,75,100]"
           appendTo="body">
    <!--<ng-template pTemplate="caption">
      <div class="ui-helper-clearfix" style="text-align: left">
        <button type="button" pButton icon="pi pi-file-excel" iconPos="left" label="EXCEL" (click)="exportExcel()" style="margin-right: 0.5em;" class="ui-button-success"></button>
        <button type="button" pButton icon="pi pi-file-pdf" iconPos="left" label="PDF" (click)="exportPdf()" class="ui-button-warning"></button>
      </div>
    </ng-template>-->
    <ng-template pTemplate="header" let-columns>
      <tr class="mprltbldata">
        <th style="text-align:center;width:50px">S.No</th>
        <th *ngFor="let col of columns" style="width:100px">
          {{col.header}}
        </th>
        <!--<th style="text-align:center">Last Consumed Date</th>
        <th style="text-align:center">Last Consumed Days</th>-->

      </tr>
      <tr>
        <th></th>
        <th> <input pInputText type="text" class="form-control" (input)="dt.filter($event.target.value, 'category', 'contains')"></th>
        <th> <input pInputText type="text" class="form-control" (input)="dt.filter($event.target.value, 'materialid', 'contains')"></th>
        <th> <input pInputText type="text" class="form-control" (input)="dt.filter($event.target.value, 'materialdescription', 'contains')"></th>
        <th> <input pInputText type="text" class="form-control" (input)="dt.filter($event.target.value, 'availableqty', 'contains')"></th>
        <th> <input pInputText type="text" class="form-control" (input)="dt.filter($event.target.value, 'unitprice', 'contains')"></th>

      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-rowData let-editing="editing" let-ri="rowIndex">
      <tr>
        <td class="ptable-cell" style="text-align:right">
          {{ri+1}}
        </td>
        <td class="ptable-cell" style="text-align:center">{{getCategory(rowData)}}</td>
        <td class="ptable-cell" style="text-align:center"><button type="button" class="btn btn-link" (click)="showMatdetails(rowData);">{{rowData.materialid}}</button></td>
        <td class="ptable-cell" style="text-align:center">{{rowData.materialdescription}}</td>
        <td class="ptable-cell" style="text-align:right">{{rowData.availableqty}}</td>
        <td class="ptable-cell" style="text-align:right">{{rowData.unitprice}}</td>
      </tr>
    </ng-template>
  </p-table>
</div>
<div *ngIf="!showAbcAnalysisList">
  <div class="row"><button class="btn btn-primary fa fa-arrow-left" (click)="showList();"></button></div><br />
  <div class="row">
    <div class="col-lg-4 col-md-4 col-sm-4 form-inline">
      <label class="form-label"><b>Material:</b></label>&nbsp;&nbsp;
      <div class="form-inline-list">
        {{matDetails.materialid}}
      </div>
    </div>
    <div class="col-lg-4 col-md-4 col-sm-4 form-inline">
      <label class="form-label"><b>Material description:</b></label>&nbsp;&nbsp;
      <div class="form-inline-list">
        {{matDetails.materialdescription}}
      </div>
    </div>
    <div class="col-lg-4 col-md-4 col-sm-4 form-inline">
      <label class="form-label"><b>Category:</b></label>&nbsp;&nbsp;
      <div class="form-inline-list">
        {{matDetails.category}}
      </div>
    </div>
  </div><br /><br />
  <p-table #dt [columns]="cols" [value]="ABCAnalysisMateDet" [style]="{'width':'100%','overflow':'auto!important'}"
           [responsive]="true" [rows]="50"
           [resizableColumns]="true"
           columnResizeMode="expand"
           [paginator]="true" [rowsPerPageOptions]="[25,50,75,100]"
           appendTo="body">
    <ng-template pTemplate="header" let-columns>
      <tr class="mprltbldata">
        <th style="text-align:center;width:50px">S.No</th>
        <th style="width:100px">GRN No</th>
        <th style="width:100px">Received Date</th>
        <th style="width:100px">Confirmed qty</th>
        <th style="width:100px">Location</th>
        <th style="width:100px">Issued qty</th>
        <th style="width:100px">Available qty</th>
      </tr>
      <tr>
        <th></th>
        <th> <input pInputText type="text" class="form-control" (input)="dt.filter($event.target.value, 'grnnumber', 'contains')"></th>
        <th> <input pInputText type="text" class="form-control" (input)="dt.filter($event.target.value, 'receiveddate', 'contains')"></th>
        <th> <input pInputText type="text" class="form-control" (input)="dt.filter($event.target.value, 'totalquantity', 'contains')"></th>
        <th> <input pInputText type="text" class="form-control" (input)="dt.filter($event.target.value, 'itemlocation', 'contains')"></th>
        <th> <input pInputText type="text" class="form-control" (input)="dt.filter($event.target.value, 'issuedqty', 'contains')"></th>
        <th> <input pInputText type="text" class="form-control" (input)="dt.filter($event.target.value, 'availableqty', 'contains')"></th>

      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-rowData let-editing="editing" let-ri="rowIndex">
      <tr>
        <td class="ptable-cell" style="text-align:right">
          {{ri+1}}
        </td>
        <td class="ptable-cell" style="text-align:center">{{rowData.grnnumber}}</td>
        <td class="ptable-cell" style="text-align:center">{{rowData.receiveddate | date :  constants.dateFormat}}</td>
        <td class="ptable-cell" style="text-align:center">{{rowData.totalquantity}}</td>
        <td class="ptable-cell" style="text-align:center">{{rowData.itemlocation}}</td>
        <td class="ptable-cell" style="text-align:center">{{rowData.issuedqty}}</td>
        <td class="ptable-cell" style="text-align:right">{{rowData.availableqty}}</td>
      </tr>
    </ng-template>
    <ng-template pTemplate="footer">
      <tr>
        <td [attr.colspan]="6" style="color: #17a2b8;">Total Qty</td>
        <td style="color: #17a2b8;">{{calculateTotalQty()}}</td>
      </tr>
    </ng-template>
  </p-table>
</div>
